<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="./images/live.png" />
    <title>Fixtures</title>
    <meta property="og:image" content="https://tchiphuong.github.io/iptv/images/thumbnail.png" />
    <meta property="og:url" content="https://tchiphuong.github.io/iptv" />
    <meta property="og:type" content="article" />
    <meta property="og:image:type" content="image/jpeg" />
    <link rel="stylesheet" href="./css/inter.css" />
    <link rel="stylesheet" href="./css/select2.min.css" />
    <link rel="stylesheet" href="./css/flatpickr.min.css">
    <link rel="stylesheet" href="./css/styles.min.css">
</head>
<body class="font-['Inter'] bg-gray-100 h-full overflow-y-scroll" x-data="fixturesComponent()" x-init="initFixtures()">
    <!-- Loading overlay -->
    <div id="loadingOverlay" x-show="loading" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white p-5 rounded-lg shadow-lg flex items-center">
            <svg class="animate-spin h-8 w-8 text-blue-500 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <span class="text-gray-700 text-lg font-semibold">Đang tải dữ liệu...</span>
        </div>
    </div>
    <div class="h-full flex flex-col">
        <div class="bg-white shadow flex justify-center sticky top-0 z-50">
            <div class="flex space-x-4 p-3">
                <button @click="tab = 'fixtures'; selectTab(tab)" :class="{'bg-blue-600 text-white rounded-full shadow-lg transform scale-105 transition-all duration-300 ease-in-out': tab === 'fixtures', 
                                  'bg-white text-gray-700 hover:bg-blue-100 transition duration-300 ease-in-out rounded-full': tab !== 'fixtures'}" class="px-3 py-1 font-semibold">
                    Fixtures
                </button>
                <button @click="tab = 'standings'; selectTab(tab)" :class="{'bg-blue-600 text-white rounded-full shadow-lg transform scale-105 transition-all duration-300 ease-in-out': tab === 'standings', 
                                  'bg-white text-gray-700 hover:bg-blue-100 transition duration-300 ease-in-out rounded-full': tab !== 'standings'}" class="px-3 py-1 font-semibold">
                    Standings
                </button>
                <button @click="tab = 'highlights'; selectTab(tab)" :class="{'bg-blue-600 text-white rounded-full shadow-lg transform scale-105 transition-all duration-300 ease-in-out': tab === 'highlights', 
                                  'bg-white text-gray-700 hover:bg-blue-100 transition duration-300 ease-in-out rounded-full': tab !== 'highlights'}" class="px-3 py-1 font-semibold">
                    Highlights
                </button>
                <button @click="tab = 'replay'; selectTab(tab)" :class="{'bg-blue-600 text-white rounded-full shadow-lg transform scale-105 transition-all duration-300 ease-in-out': tab === 'replay', 
                                  'bg-white text-gray-700 hover:bg-blue-100 transition duration-300 ease-in-out rounded-full': tab !== 'replay'}" class="px-3 py-1 font-semibold">
                    Replay
                </button>

            </div>
        </div>

        <main class="container mx-auto px-3 flex-grow">
            <!-- Scroll to Top Button -->
            <button x-show="showScrollToTop" @click="scrollToTop()" class="fixed bottom-5 right-3 lg:bottom-10 lg:right-16 z-10 bg-blue-600 text-white p-3 w-10 h-10 flex items-center justify-center rounded-full shadow-lg hover:bg-blue-700 transition duration-200 ease-in-out">
                ↑
            </button>
            <div class="relative h-full">
                <div x-show="tab === 'fixtures'" class="absolute inset-0 mt-3" x-transition:enter="transition-opacity ease-out duration-500 sm:duration-700" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-out duration-500 sm:duration-700" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
                    <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                        <div>
                            <select id="cbb-league" x-model="selectedLeagueId">
                                <option value="">Select a league</option>
                            </select>
                        </div>
                        <div class="w-full" x-data="{ selectedLeagueId: '' }" x-init="leagueSelectComponent($refs.rankings)">
                            <p id="date" class="relative flatpickr flex flex-1" data-id="strap">
                                <input id="date-input" type="text" placeholder="Chọn ngày..." data-input="" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm text-center rounded-lg block flex-1 p-2.5 ring-0" readonly="readonly" x-model="selectedDate" :disabled="selectedLeagueId !== ''" />
                                <a class="absolute right-0 top-1/2 -translate-y-1/2 cursor-pointer font-medium text-sm flex items-center justify-center p-3 hover:text-red-500" title="clear" data-clear="">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512">
                                        <path d="M 490.5389 73.58084 Q 512 47.520958 490.5389 21.461079 Q 464.47903 0 438.41916 21.461079 L 256 203.88023 L 256 203.88023 L 73.58084 21.461079 L 73.58084 21.461079 Q 47.520958 0 21.461079 21.461079 Q 0 47.520958 21.461079 73.58084 L 203.88023 256 L 203.88023 256 L 21.461079 438.41916 L 21.461079 438.41916 Q 0 464.47903 21.461079 490.5389 Q 47.520958 512 73.58084 490.5389 L 256 308.11975 L 256 308.11975 L 438.41916 490.5389 L 438.41916 490.5389 Q 464.47903 512 490.5389 490.5389 Q 512 464.47903 490.5389 438.41916 L 308.11975 256 L 308.11975 256 L 490.5389 73.58084 L 490.5389 73.58084 Z" />
                                    </svg>
                                </a>
                            </p>
                        </div>
                        <div>
                            <input type="text" id="search" placeholder="Tìm kiếm trận đấu..." class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 ring-0" x-model="search" @input="filterMatchesBySearch()" />
                        </div>
                        <div class="flex gap-2">
                            <div class="flex items-center gap-2">
                                <div class="flex items-center">
                                    <input x-model="isCheckFeatured" id="checked-featured" type="checkbox" :disabled="selectedDate !== '' || selectedLeagueId !== ''" class="w-5 h-5 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring focus:ring-blue-500 focus:ring-opacity-50" />
                                    <label for="checked-featured" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Trận cầu tâm điểm</label>
                                </div>
                            </div>
                            <div class="flex items-center gap-2 flex-grow" x-data="{selectedLeagueId: ''}">
                                <button @click="loadFixtures()" class="text-center bg-blue-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-blue-700 transition duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 flex items-center justify-center disabled:bg-gray-400 disabled:cursor-not-allowed" :disabled="selectedLeagueId !== ''">
                                    Tìm kiếm
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class=" flex flex-col gap-2 py-3">
                        <!-- New section for displaying unique tournaments within fixtures -->
                        <div class="overflow-x-auto py-1" x-show="tournaments && tournaments.length > 1">
                            <div class="flex flex-nowrap gap-3">
                                <template x-for="tournament in tournaments" :key="tournament.id">
                                    <button @click="selectTournament(tournament.id)" :class="{'border-blue-600': selectedTournament === tournament.id, 'border-white': selectedTournament !== tournament.id}" class="flex items-center justify-center p-2 border-2 rounded-md shadow-sm transition duration-200 text-gray-800 text-sm min-w-min px-5 bg-white hover:scale-[102%] hover:shadow-lg" x-bind:title="tournament.name">
                                        <img :src="customLogoHandle(tournament.id, tournament.logo) || fallbackLogo(tournament.name)" alt="" class="w-8 h-8 mr-2 object-contain" @error="tournament.logo = fallbackLogo(tournament.name)">
                                        <div x-text="tournament.name" class="truncate min-w-min font-semibold"></div>
                                    </button>
                                </template>
                            </div>
                        </div>
                        <div class="grid grid-cols-1 gap-3 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4">
                            <template x-for="match in matches" :key="match.id">
                                <a :href="`https://tchiphuong.github.io/iptv/get-key.html?id=${match.id}&title=${match.title}&isLive=1`" target="_blank" data-type="match" :data-tournament="match.tournament.id" :match="match.id" :match-live="match.isLive" x-show="selectedTournament === null || match.tournament.id === selectedTournament" class="group relative flex flex-col rounded-lg border border-gray-200 bg-white hover:scale-[102%] hover:shadow-lg">
                                    <div class="flex items-center gap-3 ml-3 absolute top-2 -right-2">
                                        <span x-text="match.status.text" :class="match.status.class" class="inline-flex items-center justify-center px-4 py-0.5 text-xs rounded-full rounded-br-none shadow-md w-max bg-gradient-to-r before:content-[''] before:absolute before:right-0 before:-bottom-2 before:w-0 before:h-0 before:border-r-8 before:border-t-8 before:border-r-transparent"></span>
                                    </div>
                                    <div class="flex w-full flex-col p-4">
                                        <div class="flex items-center gap-3 mb-2">
                                            <img class="object-contain w-12 h-12" :src="customLogoHandle(match.tournament.id, match.tournament.logo) || fallbackLogo(match.tournament.name)" loading="lazy" @error="match.tournament.logo = fallbackLogo(match.tournament.name)">
                                            <div class="flex items-center justify-between mt-2 flex-grow">
                                                <span class="font-bold text-lg line-clamp-1 flex-grow" x-text="match.tournament.name" :title="match.tournament.name"></span>
                                            </div>
                                        </div>
                                        <div class="flex w-full gap-4">
                                            <div class="flex flex-1 flex-col gap-2">
                                                <div class="flex items-center gap-2">
                                                    <img class="h-10 w-10 object-contain" :src="match.homeLogo || fallbackLogo(match.homeTeam)" loading="lazy" @error="match.homeLogo = fallbackLogo(match.homeTeam)">
                                                    <div class="flex-1 text-sm font-semibold line-clamp-1" x-text="match.homeTeam" :title="match.homeTeam"></div>
                                                    <span x-show="match.homeRedCards > 0">
                                                        <img src="https://ssl.gstatic.com/onebox/sports/soccer_timeline/red-card-right.svg" alt="Thẻ đỏ" class="h-6" />
                                                    </span>
                                                    <span class="text-xl font-bold" x-text="['live', 'finished'].includes(match.match_status) ? match.homeScore : ''"></span>
                                                </div>
                                                <div class="flex items-center gap-2">
                                                    <img class="h-10 w-10 object-contain" :src="match.awayLogo || fallbackLogo(match.awayTeam)" loading="lazy" @error="match.awayLogo = fallbackLogo(match.awayTeam)">
                                                    <div class="flex-1 text-sm font-semibold line-clamp-1" x-text="match.awayTeam" :title="match.awayTeam"></div>
                                                    <span x-show="match.awayRedCards > 0">
                                                        <img src="https://ssl.gstatic.com/onebox/sports/soccer_timeline/red-card-right.svg" alt="Thẻ đỏ" class="h-6" />
                                                    </span>
                                                    <span class="text-xl font-bold" x-text="['live', 'finished'].includes(match.match_status) ? match.awayScore : ''"></span>
                                                </div>
                                            </div>
                                            <div class="flex flex-col justify-between">
                                                <div class="flex items-center gap-1">
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512" class="text-gray-500">
                                                        <path d="M 160 0 Q 182 2 184 24 L 184 64 L 184 64 L 328 64 L 328 64 L 328 24 L 328 24 Q 330 2 352 0 Q 374 2 376 24 L 376 64 L 376 64 L 416 64 L 416 64 Q 443 65 461 83 Q 479 101 480 128 L 480 144 L 480 144 L 480 192 L 480 192 L 480 448 L 480 448 Q 479 475 461 493 Q 443 511 416 512 L 96 512 L 96 512 Q 69 511 51 493 Q 33 475 32 448 L 32 192 L 32 192 L 32 144 L 32 144 L 32 128 L 32 128 Q 33 101 51 83 Q 69 65 96 64 L 136 64 L 136 64 L 136 24 L 136 24 Q 138 2 160 0 L 160 0 Z M 432 192 L 80 192 L 432 192 L 80 192 L 80 448 L 80 448 Q 81 463 96 464 L 416 464 L 416 464 Q 431 463 432 448 L 432 192 L 432 192 Z M 144 256 L 240 256 L 144 256 L 240 256 Q 255 257 256 272 L 256 368 L 256 368 Q 255 383 240 384 L 144 384 L 144 384 Q 129 383 128 368 L 128 272 L 128 272 Q 129 257 144 256 L 144 256 Z"></path>
                                                    </svg>
                                                    <span class="text-sm text-gray-600" x-text="match.dateFormatted"></span>
                                                </div>
                                                <div class="flex items-center gap-1">
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512" class="text-gray-500">
                                                        <path d="M 464 256 Q 464 313 436 360 L 436 360 L 436 360 Q 409 407 360 436 Q 311 464 256 464 Q 201 464 152 436 Q 103 407 76 360 Q 48 313 48 256 Q 48 199 76 152 Q 103 105 152 76 Q 201 48 256 48 Q 311 48 360 76 Q 409 105 436 152 Q 464 199 464 256 L 464 256 Z M 0 256 Q 1 326 34 384 L 34 384 L 34 384 Q 68 442 128 478 Q 189 512 256 512 Q 323 512 384 478 Q 444 442 478 384 Q 511 326 512 256 Q 511 186 478 128 Q 444 70 384 34 Q 323 0 256 0 Q 189 0 128 34 Q 68 70 34 128 Q 1 186 0 256 L 0 256 Z M 232 120 L 232 256 L 232 120 L 232 256 Q 232 269 243 276 L 339 340 L 339 340 Q 358 351 372 333 Q 383 314 365 300 L 280 243 L 280 243 L 280 120 L 280 120 Q 278 98 256 96 Q 234 98 232 120 L 232 120 Z"></path>
                                                    </svg>
                                                    <span class="text-sm text-gray-600" x-text="match.timeFormatted"></span>
                                                    <img class="h-6" src="https://tchiphuong.github.io/iptv/images/live.gif" x-show="match.isLive && match.match_status === 'live'">
                                                </div>
                                                <div class="flex items-center gap-1">
                                                    <svg xmlns="http://www.w3.org/2000/svg" height="1em" fill="currentColor" viewBox="0 0 512 512" class="text-gray-500">
                                                        <path
                                                            d="M 304 128 L 304 160 L 304 128 L 304 160 L 272 160 L 272 160 Q 257 161 256 176 Q 257 191 272 192 L 304 192 L 304 192 L 304 224 L 304 224 L 272 224 L 272 224 Q 257 225 256 240 Q 257 255 272 256 L 304 256 L 304 256 Q 303 276 290 290 Q 276 303 256 304 Q 236 303 222 290 Q 209 276 208 256 L 208 96 L 208 96 Q 209 76 222 62 Q 236 49 256 48 Q 276 49 290 62 Q 303 76 304 96 L 272 96 L 272 96 Q 257 97 256 112 Q 257 127 272 128 L 304 128 L 304 128 Z M 160 96 L 160 256 L 160 96 L 160 256 Q 161 297 188 324 Q 215 351 256 352 Q 297 351 324 324 Q 351 297 352 256 L 352 96 L 352 96 Q 351 55 324 28 Q 297 1 256 0 Q 215 1 188 28 Q 161 55 160 96 L 160 96 Z M 128 216 Q 126 194 104 192 Q 82 194 80 216 L 80 256 L 80 256 Q 81 324 124 372 Q 166 420 232 430 L 232 464 L 232 464 L 184 464 L 184 464 Q 162 466 160 488 Q 162 510 184 512 L 256 512 L 328 512 Q 350 510 352 488 Q 350 466 328 464 L 280 464 L 280 464 L 280 430 L 280 430 Q 346 420 388 372 Q 431 324 432 256 L 432 216 L 432 216 Q 430 194 408 192 Q 386 194 384 216 L 384 256 L 384 256 Q 383 310 347 347 Q 310 383 256 384 Q 202 383 165 347 Q 129 310 128 256 L 128 216 L 128 216 Z">
                                                        </path>
                                                    </svg>
                                                    <span class="text-sm line-clamp-2 text-gray-600 truncate" x-html="match.commentator.join('</br>')" :title="match.commentator.join(', ')"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </template>
                        </div>
                    </div>
                </div>

                <div x-show="tab === 'standings'" class="absolute inset-0 mt-5" x-transition:enter="transition-opacity ease-out duration-500 sm:duration-700" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-out duration-500 sm:duration-700" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
                    <div x-data="rankingsComponent()" x-ref="rankings" class="flex flex-col gap-2 py-2">
                        <!-- Loading overlay -->
                        <div id="loadingOverlay" x-show="loading" class="fixed inset-0 bg-gray-900 bg-opacity-50 z-50 flex items-center justify-center">
                            <div class="bg-white p-5 rounded-lg shadow-lg flex items-center">
                                <svg class="animate-spin h-8 w-8 text-blue-500 mr-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                                </svg>
                                <span class="text-gray-700 text-lg font-semibold">Đang tải dữ liệu...</span>
                            </div>
                        </div>
                        <div class="flex gap-2">
                            <div class="w-full md:w-1/2 lg:w-4/12 xl:w-3/12" x-data="leagueSelectComponent($refs.rankings)" x-init="initLeague()">
                                <select id="cbb-standings" x-model="selectedLeagueId">
                                    <option value="">Select a league</option>
                                </select>
                            </div>
                        </div>
                        <template x-for="(rank, index) in ranks" :key="index">
                            <div>
                                <h2 class="text-lg font-semibold pt-2" x-text="rank.group_name"></h2>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm text-left text-gray-500 shadow rounded-lg border border-gray-300 overflow-hidden">
                                        <thead class="text-xs text-gray-700 bg-white border-b">
                                            <tr>
                                                <th scope="col" class="py-3 px-3 text-center">#</th>
                                                <th scope="col" class="py-3 px-3 text-center">Team</th>
                                                <th scope="col" class="py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">Pl</span>
                                                    <span class="hidden md:block whitespace-nowrap">Played</span>
                                                </th>
                                                <th scope="col" class="py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">W</span>
                                                    <span class="hidden md:block whitespace-nowrap">Won</span>
                                                </th>
                                                <th scope="col" class="py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">D</span>
                                                    <span class="hidden md:block whitespace-nowrap">Drawn</span>
                                                </th>
                                                <th scope="col" class="py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">L</span>
                                                    <span class="hidden md:block whitespace-nowrap">Lost</span>
                                                </th>
                                                <th scope="col" class="hidden md:table-cell py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">GF</span>
                                                    <span class="hidden md:block whitespace-nowrap">Goals For</span>
                                                </th>
                                                <th scope="col" class="hidden md:table-cell py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">GA</span>
                                                    <span class="hidden md:block whitespace-nowrap">Goals Against</span>
                                                </th>
                                                <th scope="col" class="py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">GD</span>
                                                    <span class="hidden md:block whitespace-nowrap">Goals Diference</span>
                                                </th>
                                                <th scope="col" class="py-3 px-3 text-center w-[10%]">
                                                    <span class="md:hidden">Pts</span>
                                                    <span class="hidden md:block whitespace-nowrap">Points</span>
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <template x-for="team in rank.team_ranks" :key="team.team_id">
                                                <tr class="bg-white border-b hover:text-gray-600 hover:bg-gray-50">
                                                    <td x-text="team.team_rank" class="px-2 text-center"></td>
                                                    <td class="py-2 px-3 flex items-center font-medium text-gray-900 whitespace-nowrap">
                                                        <img :src="team.team_logo_custom || team.team_logo || fallbackLogo(team.team_name)" :alt="team.team_name" class="h-8 w-8 object-contain" loading="lazy" @error="team.team_logo_custom = fallbackLogo(team.team_name)">
                                                        <span class="px-2 line-clamp-1 font-semibold" x-text="team.team_name"></span>
                                                    </td>
                                                    <td x-text="team.total_count" class="py-2 px-3 text-center"></td>
                                                    <td x-text="team.win_count" class="py-2 px-3 text-center"></td>
                                                    <td x-text="team.draw_count" class="py-2 px-3 text-center"></td>
                                                    <td x-text="team.lose_count" class="py-2 px-3 text-center"></td>
                                                    <td x-text="team.get_score" class="hidden md:table-cell py-2 px-3 text-center"></td>
                                                    <td x-text="team.lose_score" class="hidden md:table-cell py-2 px-3 text-center"></td>
                                                    <td x-text="team.goal_difference" class="py-2 px-3 text-center"></td>
                                                    <td x-text="team.integral" class="py-2 px-3 text-center"></td>
                                                </tr>
                                            </template>
                                        </tbody>
                                </div>
                                </table>
                            </div>
                        </template>
                        <div x-show="ranks.length === 0" class="text-center py-9">
                            Bảng xếp hạng chưa được cập nhật
                        </div>
                    </div>
                </div>

                <div x-show="tab === 'highlights'" class="absolute inset-0 mt-5" x-transition:enter="transition-opacity ease-out duration-500 sm:duration-700" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-out duration-500 sm:duration-700" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
                    <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                        <template x-for="highlight in highlights" :key="highlight.id">
                            <a :href="`${host}get-key.html?id=${highlight.id}`" target="_blank" class="relative group block bg-white rounded-lg shadow hover:shadow-lg transition">
                                <img :src="highlight.feature_image" alt="" loading="lazy" class="w-full aspect-video object-cover rounded-t-lg">
                                <div class="flex items-center gap-3 ml-3 absolute top-[0.5rem] -right-2">
                                    <span class="inline-flex items-center justify-center px-4 py-0.5 text-xs rounded-full rounded-br-none shadow-md w-max bg-gradient-to-r before:content-[''] before:absolute before:right-0 before:-bottom-2 before:w-0 before:h-0 before:border-r-8 before:border-t-8 before:border-r-transparent text-white from-blue-600 to-blue-400 before:border-t-blue-300" x-text="highlight.description.split('|')[1].replace('BLV ','')"></span>
                                </div>
                                <div class="flex items-center gap-3 ml-3 absolute top-[2.25rem] -right-2">
                                    <span class="inline-flex items-center justify-center px-4 py-0.5 text-xs rounded-full rounded-br-none shadow-md w-max bg-gradient-to-r before:content-[''] before:absolute before:right-0 before:-bottom-2 before:w-0 before:h-0 before:border-r-8 before:border-t-8 before:border-r-transparent text-white from-red-600 to-red-400 before:border-t-red-600" x-text="moment(highlight.description.split('|')[2], 'DD.MM.YY').format('DD/MM/YYYY')"></span>
                                </div>
                                <div class="px-4 py-2">
                                    <h3 class="text-lg font-semibold line-clamp-2" x-text="highlight.description.split('|')[0]"></h3>
                                </div>
                            </a>
                        </template>
                    </div>
                    <div class="flex justify-center py-4">
                        <button @click="loadMoreHighlights()" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition" :disabled="loadingHighlights">
                            <span x-show="!loadingHighlights">Load More</span>
                            <span x-show="loadingHighlights">Loading...</span>
                        </button>
                    </div>
                </div>

                <div x-show="tab === 'replay'" class="absolute inset-0 mt-5" x-transition:enter="transition-opacity ease-out duration-500 sm:duration-700" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100" x-transition:leave="transition-opacity ease-out duration-500 sm:duration-700" x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0">
                    <div class="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
                        <template x-for="replay in replays" :key="replay.id">
                            <a :href="`${host}get-key.html?id=${replay.id}`" target="_blank" class="relative group block bg-white rounded-lg shadow hover:shadow-lg transition">
                                <img :src="replay.feature_image" alt="" loading="lazy" class="w-full aspect-video object-cover rounded-t-lg">
                                <div class="flex items-center gap-3 ml-3 absolute top-[0.5rem] -right-2">
                                    <span class="inline-flex items-center justify-center px-4 py-0.5 text-xs rounded-full rounded-br-none shadow-md w-max bg-gradient-to-r before:content-[''] before:absolute before:right-0 before:-bottom-2 before:w-0 before:h-0 before:border-r-8 before:border-t-8 before:border-r-transparent text-white from-blue-600 to-blue-400 before:border-t-blue-300" x-text="replay.description.split('|')[1].replace('BLV ','')"></span>
                                </div>
                                <div class="flex items-center gap-3 ml-3 absolute top-[2.25rem] -right-2">
                                    <span class="inline-flex items-center justify-center px-4 py-0.5 text-xs rounded-full rounded-br-none shadow-md w-max bg-gradient-to-r before:content-[''] before:absolute before:right-0 before:-bottom-2 before:w-0 before:h-0 before:border-r-8 before:border-t-8 before:border-r-transparent text-white from-red-600 to-red-400 before:border-t-red-600" x-text="moment(replay.description.split('|')[2], 'DD.MM.YY').format('DD/MM/YYYY')"></span>
                                </div>
                                <div class="px-4 py-2">
                                    <h3 class="text-lg font-semibold line-clamp-2" x-text="replay.description.split('|')[0]"></h3>
                                </div>
                            </a>
                        </template>
                    </div>
                    <div class="flex justify-center py-4">
                        <button @click="loadMoreReplays()" class="bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition" :disabled="loadingReplays">
                            <span x-show="!loadingReplays">Load More</span>
                            <span x-show="loadingReplays">Loading...</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="./js/jquery-1.12.4.js"></script>
    <script src="./js/moment.min.js"></script>
    <script src="./js/moment.vi.min.js"></script>
    <script src="./js/moment-timezone-with-data.min.js"></script>
    <script src="./js/alpinejs.min.js" defer></script>
    <script src="./js/select2.min.js"></script>
    <script src="./js/select2.vi.min.js"></script>
    <script src="./js/flatpickr.min.js"></script>
    <script src="./js/flatpickr.vn.min.js"></script>
    <script>
        var resp;
        moment.locale('vi');
        moment.tz.setDefault("Asia/Ho_Chi_Minh");
        function fixturesComponent() {
            return {
                tab: 'fixtures',
                indicatorWidth: 0,
                indicatorLeft: 0,
                matches: [],
                originalMatches: [], // Store the original matches
                selectedTournaments: [],
                tournaments: [],
                highlights: [],
                replays: [],
                hasLoadedHighlights: false,
                hasLoadedFixtures: false,
                matchStatusLabels: {
                    "finished": {
                        "class": "from-green-500 to-green-300 before:border-t-green-500 text-white",
                        "text": "Kết thúc"
                    },
                    "delay": {
                        "class": "from-yellow-500 to-yellow-300 before:border-t-yellow-500 text-black",
                        "text": "Bị hoãn"
                    },
                    // "pending": {
                    //     "class": "bg-gray-500 text-white",
                    //     "text": "Chờ xử lý"
                    // },
                    "canceled": {
                        "class": "from-gray-600 to-gray-400 before:border-t-gray-300 text-white",
                        "text": "Hủy bỏ"
                    },
                    "live":
                    {
                        "class": "text-white from-red-600 to-red-400 before:border-t-red-600",
                        "text": "Trực tiếp"
                    }
                },
                selectedTournament: null,
                loading: true,
                selectedDate: '',
                isCheckFeatured: true,
                url: "",
                leagues: [],
                selectedLeagueId: '',
                leagueLogos: {},
                search: '',
                showScrollToTop: false,
                currentPage: 1,
                loadingHighlights: false,
                replayPage: 1,
                loadingReplays: false,
                host: "https://tchiphuong.github.io/iptv/",
                async loadFixtures(selectedLeagueId) {
                    let url = `https://live.vebo.xyz/api/match/live`;
                    if (selectedLeagueId) {
                        url = `https://api.vebo.xyz/api/tournament/fixture/${selectedLeagueId}`;
                    } else if (this.selectedDate) {
                        const selectedDate = moment(this.selectedDate, "DD/MM/YYYY");
                        url = `https://api.vebo.xyz/api/match/fixture/${selectedDate.format("YYYYMMDD")}`
                    } else if (this.isCheckFeatured) {
                        url = `https://api.vebo.xyz/api/match/featured`;
                    }

                    // if (this.hasLoadedFixtures && this.url == url) return;
                    // this.hasLoadedFixtures = true;
                    // this.url = url;

                    try {
                        this.loading = true;
                        const response = await fetch(url);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        const data = await response.json();

                        this.matches = Object.values(data.data)
                            .filter(match => match.sport_type)
                            .sort((a, b) => {
                                const nameA = a.home?.name || '';
                                const nameB = b.home?.name || '';
                                return nameA.localeCompare(nameB);
                            })
                            .sort((a, b) => {
                                if (a.match_status === 'live' && b.match_status !== 'live') {
                                    return -1;
                                }
                                if (a.match_status !== 'live' && b.match_status === 'live') {
                                    return 1;
                                }

                                const timestampA = new Date(a.timestamp).getTime();
                                const timestampB = new Date(b.timestamp).getTime();
                                if (timestampA !== timestampB) {
                                    return timestampA - timestampB;
                                }

                                const priorityA = a.tournament.unique_tournament.priority || 0;
                                const priorityB = b.tournament.unique_tournament.priority || 0;
                                return priorityB - priorityA;
                            })
                            .map(match => {
                                const startTime = moment(match.timestamp);
                                return {
                                    id: match.id,
                                    title: match.name,
                                    tournament: match?.tournament?.unique_tournament,
                                    homeLogo: match?.home?.logo || this.fallbackLogo(match?.home?.name),
                                    homeTeam: match.home?.name,
                                    homeScore: match.scores.home,
                                    awayLogo: match?.away?.logo || this.fallbackLogo(match?.away?.name),
                                    awayTeam: match.away?.name,
                                    awayScore: match.scores.away,
                                    dateFormatted: moment(match.date).format('dd, DD/MM/YY'),
                                    timeFormatted: startTime.format('HH:mm'),
                                    isLive: match.is_live,
                                    commentator: match.commentators ? match.commentators.map(c => c.name) : ["N/A"],
                                    startTime: startTime.format(),
                                    homeRedCards: match.home_red_cards || 0,
                                    awayRedCards: match.away_red_cards || 0,
                                    match_status: match.match_status,
                                    status: this.statusHandle(match)
                                };
                            });

                        this.originalMatches = [...this.matches]; // Save a copy of the original matches

                        const tournamentMap = new Map();
                        const tournamentIds = new Set(); // Set to track unique tournament IDs
                        const tournamentsArray = []; // Array to hold tournaments before sorting

                        this.matches.forEach(match => {
                            if (match && match.tournament) {
                                const tournament = match.tournament; // Access the tournament object
                                const tournamentId = tournament.id;

                                // Check if the tournament ID is unique
                                if (tournamentId && !tournamentIds.has(tournamentId)) {
                                    tournamentIds.add(tournamentId); // Add the ID to the Set
                                    tournamentsArray.push({
                                        id: tournamentId,
                                        name: tournament.name,
                                        logo: tournament.logo,
                                        isFeatured: tournament.is_featured, // Store the is_featured property
                                        priority: tournament.priority || 0 // Store the priority, default to 0 if not defined
                                    });
                                }
                            }
                        });

                        // Sort the tournaments array by isFeatured and then by priority
                        this.tournaments = tournamentsArray.sort((a, b) => {
                            if (b.isFeatured === a.isFeatured) {
                                return b.priority - a.priority; // Sort by priority if isFeatured is the same
                            }
                            return (b.isFeatured ? 1 : 0) - (a.isFeatured ? 1 : 0); // Sort featured tournaments first
                        });

                        this.selectedTournament = null;
                        this.selectedTournaments = [];

                        console.log(this.matches);
                        console.log(this.tournaments);
                        console.log(this.selectedTournament)
                    } catch (error) {
                        console.error("Error loading fixtures:", error);
                    } finally {
                        this.loading = false;
                    }
                },
                async loadHighlights() {
                    try {
                        this.loadingHighlights = true;
                        const response = await fetch(`https://api.vebo.xyz/api/news/xoilac/list/highlight/${this.currentPage}`);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        const data = await response.json();
                        if (data.status === 1) {
                            this.highlights.push(...data.data.list);
                            this.currentPage++;
                        } else {
                            console.error("Error fetching highlights:", data);
                        }
                    } catch (error) {
                        console.error("Error loading highlights:", error);
                    } finally {
                        this.loadingHighlights = false;
                    }
                },
                loadMoreHighlights() {
                    this.loadHighlights();
                },
                async loadReplays() {
                    try {
                        this.loadingReplays = true;
                        const response = await fetch(`https://api.vebo.xyz/api/news/vebotv/list/xemlai/${this.replayPage}`);
                        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                        const data = await response.json();
                        if (data.status === 1) {
                            this.replays.push(...data.data.list);
                            this.replayPage++;
                        } else {
                            console.error("Error fetching replays:", data);
                        }
                    } catch (error) {
                        console.error("Error loading replays:", error);
                    } finally {
                        this.loadingReplays = false;
                    }
                },
                loadMoreReplays() {
                    this.loadReplays();
                },
                async initFixtures() {
                    const response = await fetch('data/custom-logo.json');
                    this.leagueLogos = await response.json();
                    this.loadFixtures();
                    this.updateIndicator();
                    flatpickr("#date", {
                        locale: "vn",
                        dateFormat: "d/m/Y",
                        wrap: true,
                    });
                    this.fetchLeagues();
                    window.addEventListener('scroll', () => this.handleScroll());
                },
                handleScroll() {
                    this.showScrollToTop = window.scrollY > 200;
                },
                filterMatches() {
                    this.matches = this.selectedTournaments.length > 0
                        ? this.matches.filter(match => this.selectedTournaments.includes(match.tournamentId))
                        : this.loadFixtures();
                },
                filterMatchesBySearch() {
                    const searchTerm = this.search.toLowerCase();
                    if (!searchTerm) {
                        this.matches = [...this.originalMatches]; // Restore original matches
                        return;
                    }
                    this.matches = this.originalMatches.filter(match =>
                        match.homeTeam.toLowerCase().includes(searchTerm) ||
                        match.awayTeam.toLowerCase().includes(searchTerm)
                    );
                },
                updateIndicator() {
                    const activeTab = document.querySelector('.flex button.text-blue-600');
                    if (activeTab) {
                        this.indicatorWidth = activeTab.offsetWidth;
                        this.indicatorLeft = activeTab.offsetLeft;
                    }
                },
                selectTab(selectedTab) {
                    this.tab = selectedTab;
                    // Set the document title based on the selected tab
                    if (selectedTab === 'fixtures') {
                        document.title = 'Fixtures'; // Set title for fixtures tab
                        // this.loadFixtures();
                    }
                    else if (selectedTab === 'highlights') {
                        document.title = 'Highlights';
                        this.loadHighlights(); // Load highlights if the selected tab is 'highlights'
                    } else if (selectedTab === 'replay') {
                        document.title = 'Replay';
                        this.loadReplays(); // Load replays if the selected tab is 'replay'
                    } else {
                        document.title = 'Standings'; // Set title for fixtures tab
                    }
                },
                selectTournament(tournamentId) {
                    this.selectedTournament = this.selectedTournament === tournamentId ? null : tournamentId; // Toggle selection
                    console.log(this.selectedTournament)
                },
                updateMatchVisibility() {
                    const matchElements = document.querySelectorAll('[data-type="match"]');
                    matchElements.forEach(match => {
                        const matchTournamentId = match.getAttribute('data-tournament');
                        if (this.selectedTournament && matchTournamentId !== this.selectedTournament) {
                            match.classList.add('opacity-0', 'transition-all', 'duration-300');
                            match.classList.remove('opacity-100');
                        } else {
                            match.classList.remove('opacity-0', 'pointer-events-none');
                            match.classList.add('opacity-100', 'transition-all', 'duration-300');
                        }

                    });
                },
                fallbackLogo(name) {
                    return `https://ui-avatars.com/api/?format=svg&rounded=true&name=${encodeURIComponent(name)}`;
                },
                statusHandle(match) {
                    let status = { class: null, text: null };
                    if (Object.keys(this.matchStatusLabels).includes(match.match_status)) {
                        status.text = this.matchStatusLabels[match.match_status].text;
                        status.class = this.matchStatusLabels[match.match_status].class;
                    }
                    else if (match.is_live || match.match_status === 'live') {
                        status.class = "text-white from-red-600 to-red-400 before:border-t-red-600";
                        status.text = 'Trực tiếp';
                    }
                    else {
                        const timestampMoment = moment(match.timestamp);
                        if (timestampMoment.isValid()) {
                            if (moment().isSameOrAfter(moment(match.timestamp))) {
                                status.class = this.matchStatusLabels['finished'].class;
                                status.text = this.matchStatusLabels['finished'].text
                            } else {
                                const timeDiff = moment(match.timestamp).diff(moment(), 'days');
                                if (timeDiff < 1) {
                                    status.class = "text-white from-blue-600 to-blue-400 before:border-t-blue-300";
                                    status.text = `${moment.duration(moment(match.timestamp).diff(moment())).humanize(true)}`;
                                } else {
                                    status.class = "hidden"; // Hoặc giá trị mặc định khác nếu không hiển thị
                                    status.text = null; // Hoặc giá trị mặc định khác nếu không hiển thị
                                }
                            }
                        }
                    }
                    return status;
                },
                fetchLeagues() {
                    const url = 'https://api.vebo.xyz/api/tournament/menu';
                    fetch(url)
                        .then(response => response.json())
                        .then(data => {
                            this.isLoading = false;
                            if (data.data) {
                                // Filter leagues where sport_type is 1
                                this.leagues = data.data
                                    //.filter(league => league.sport_type === 1 && league.app_display) // Filtering logic
                                    // Sort leagues by league_type, then by order_number
                                    // .sort((a, b) => {
                                    //     return a.order_number - b.order_number;
                                    // })
                                    .map(league => ({
                                        id: league.unique_ids.default,
                                        name: league.name,
                                        logo: league.logo // Assuming logo is available
                                    }));

                                // Initialize Select2 after leagues are loaded
                                this.$nextTick(() => {
                                    $('#cbb-league').select2({
                                        templateResult: (league) => this.formatState(league, this.isLoading),
                                        templateSelection: (league) => this.formatState(league, this.isLoading),
                                        data: this.leagues,
                                        width: '100%',
                                        language: 'vi',
                                        allowClear: true, // Kích hoạt nút clear
                                        placeholder: 'Chọn giải đấu...', // Placeholder để hiển thị khi không có lựa chọn
                                    }).on('change', (e) => {
                                        this.selectedLeagueId = $(e.target).val(); // Update the model
                                        this.loadFixtures(this.selectedLeagueId); // Call the method to fetch rankings
                                    });
                                });
                            } else {
                                console.error('No league data available');
                            }
                        })
                        .catch(error => {
                            console.error('Error loading the leagues:', error);
                        });
                },
                formatState(league, isLoading = false) {
                    if (isLoading) {
                        return $(`<div class="flex items-center gap-2">
                                    <div class="h-6 w-6 bg-gray-300 animate-pulse rounded-full"></div>
                                    <div class="h-4 w-24 bg-gray-300 animate-pulse rounded"></div>
                                </div>`);
                    }

                    if (!league.id) {
                        return league.text; // Return the default text if no ID
                    }

                    return $(`<div class="flex items-center gap-2">
                                <img class="h-6 w-6 object-contain" src="${this.customLogoHandle(league.id, league.logo)}" />
                                <span>${league.name}</span>
                            </div>`);
                },
                customLogoHandle(id, defaultLogo) {
                    try {
                        return this.leagueLogos[id] || defaultLogo;
                    } catch (error) {
                        console.error('Error loading league logos:', error);
                        return defaultLogo;
                    }
                },
                scrollToTop() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            };
        }

        function rankingsComponent() {
            return {
                teams: [],
                selectedLeagueId: '',
                loading: false,
                ranks: [],
                previousData: null,
                fetchRankingsForLeague() {
                    if (!this.selectedLeagueId) return; // Đảm bảo đã chọn một giải đấu
                    const url = `https://soccer-api.api.vinasports.com.vn/api/v1/publish/leagues/ranking?league_id=${this.selectedLeagueId}`;
                    this.loading = true;
                    fetch(url)
                        .then(response => response.json())
                        .then(data => {
                            this.loading = false;
                            if (data.success && data.data && data.data.ranks?.length > 0) {
                                this.ranks = data.data.ranks;

                                // var dataToSave = data.data.ranks.map(group => ({
                                //     league_id: group.team_ranks[0].league_id,
                                //     league_current_season: group.team_ranks[0].league_current_season,  // Mùa giải của đội bóng
                                //     group_name: group.group_name, // Tên nhóm (nếu có)
                                //     teams: group.team_ranks.map(team => ({
                                //         team_id: team.team_id,  // Mã đội bóng
                                //         team_rank: team.team_rank,  // Thứ hạng đội bóng
                                //         league_current_round: team.league_current_round,  // Vòng đấu hiện tại của đội bóng
                                //     }))
                                // }));
                                // console.log(dataToSave)

                                // const currentRound = data.data.ranks[0].team_ranks[0]?.league_current_round;
                                // // Chỉ tính toán khi vòng đấu thay đổi
                                // if (currentRound !== this.previousRound) {
                                //     if (this.previousRanks) {
                                //         this.ranks = this.calculateRankChanges(data.data.ranks, this.previousRanks);
                                //     } else {
                                //         this.ranks = data.data.ranks;
                                //     }

                                //     // Lưu dữ liệu mới vào localStorage
                                //     this.previousRanks = JSON.parse(JSON.stringify(data.data.ranks));
                                //     this.previousRound = currentRound;


                                // } else {
                                //     console.log("Round hasn't changed, no rank calculation performed.");
                                //     this.ranks = data.data.ranks; // Vẫn cập nhật ranks hiện tại nhưng không tính thay đổi
                                // }
                                // console.log(this.ranks)

                            } else {
                                console.error('No ranking data available');
                                this.ranks = [];
                            }
                            console.log(this.ranks);

                            // this.savePreviousDataToStorage(dataToSave);
                            // this.previousData = this.getPreviousDataFromStorage();
                            // console.log(this.previousData)
                        })
                        .catch(error => {
                            this.loading = false;
                            console.error('Error fetching rankings:', error);
                            alert('Error fetching rankings. Please try again later.');
                        });
                },
                calculateRankChanges(currentRanks, previousRanks) {
                    // Tạo map từ previousRanks để tra cứu nhanh
                    const previousRankMap = previousRanks.reduce((map, rankGroup) => {
                        rankGroup.team_ranks.forEach(team => {
                            const key = `${team.league_id}_${team.team_id}`;
                            map[key] = team.team_rank;
                        });
                        return map;
                    }, {});

                    // Thêm thuộc tính `change` vào currentRanks
                    currentRanks.forEach(rankGroup => {
                        rankGroup.team_ranks.forEach(team => {
                            const key = `${team.league_id}_${team.team_id}`;
                            const previousRank = previousRankMap[key]; // Tra cứu bằng `league_id` và `team_id`

                            if (previousRank === undefined) {
                                team.change = "new"; // Đội mới
                            } else if (previousRank > team.team_rank) {
                                team.change = "up"; // Tăng hạng
                            } else if (previousRank < team.team_rank) {
                                team.change = "down"; // Giảm hạng
                            } else {
                                team.change = "no-change"; // Không đổi
                            }
                        });
                    });

                    return currentRanks;
                },
                savePreviousDataToStorage(previousData) {
                    localStorage.setItem('previousData', JSON.stringify(previousData));
                },
                getPreviousDataFromStorage() {
                    const data = localStorage.getItem('previousData');
                    try {
                        return data ? JSON.parse(data) : null;
                    } catch (e) {
                        console.error("Error parsing data from localStorage", e);
                        return null;
                    }
                },
                fallbackLogo(name) {
                    return `https://ui-avatars.com/api/?format=svg&rounded=true&name=${encodeURIComponent(name)}`;
                },
            };
        }

        function leagueSelectComponent() {
            return {
                selectedLeagueId: '',
                leagues: [],
                isLoading: true,
                initLeague() {
                    this.fetchLeagues();
                },
                fetchLeagues() {
                    const url = 'https://soccer-api.api.vinasports.com.vn/api/v1/publish/leagues';
                    fetch(url)
                        .then(response => response.json())
                        .then(data => {
                            this.isLoading = false;
                            if (data.success && data.data) {
                                // Filter leagues where sport_type is 1
                                this.leagues = data.data
                                    .filter(league => league.sport_type === 1 && league.app_display) // Filtering logic
                                    // Sort leagues by league_type, then by order_number
                                    .sort((a, b) => {
                                        return a.order_number - b.order_number;
                                    })
                                    .map(league => ({
                                        id: league.league_sync_id,
                                        name: league.name,
                                        logo: league.logo // Assuming logo is available
                                    }));

                                // Initialize Select2 after leagues are loaded
                                this.$nextTick(() => {
                                    $('#cbb-standings').select2({
                                        templateResult: (league) => this.formatState(league, this.isLoading),
                                        templateSelection: (league) => this.formatState(league, this.isLoading),
                                        data: this.leagues,
                                        width: '100%',
                                        language: 'vi',
                                        allowClear: true, // Kích hoạt nút clear
                                        placeholder: 'Chọn giải đấu...', // Placeholder để hiển thị khi không có lựa chọn
                                    }).on('change', (e) => {
                                        this.selectedLeagueId = $(e.target).val(); // Update the model
                                        this.fetchRankingsForLeague(); // Call the method to fetch rankings
                                    });
                                });
                            } else {
                                console.error('No league data available');
                            }
                        })
                        .catch(error => {
                            console.error('Error loading the leagues:', error);
                        });
                },
                formatState(league, isLoading = false) {
                    if (isLoading) {
                        return $(`<div class="flex items-center gap-2">
                                    <div class="h-6 w-6 bg-gray-300 animate-pulse rounded-full"></div>
                                    <div class="h-4 w-24 bg-gray-300 animate-pulse rounded"></div>
                                </div>`);
                    }

                    if (!league.id) {
                        return league.text; // Return the default text if no ID
                    }

                    return $(`<div class="flex items-center gap-2">
                                <img class="h-6 w-6 object-contain rounded-full" src="${league.logo}" />
                                <span>${league.name}</span>
                            </div>`);
                }
            };
        }
    </script>
</body>
</html>